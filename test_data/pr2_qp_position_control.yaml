scope:
  # definition of some nice short-cuts
  - unit_x: {vector3: [1, 0, 0]}
  - unit_y: {vector3: [0, 1, 0]}
  - unit_z: {vector3: [0, 0, 1]}
  
  
  # definition of joint input variables
  - torso_lift_joint: {input-variable: 0}
  - l_shoulder_pan_joint: {input-variable: 1}
  - l_shoulder_lift_joint: {input-variable: 2}
  - l_upper_arm_roll_joint: {input-variable: 3}
  - l_elbow_flex_joint: {input-variable: 4}
  - l_forearm_roll_joint: {input-variable: 5}
  - l_wrist_flex_joint: {input-variable: 6}
  - l_wrist_roll_joint: {input-variable: 7}
  
  
  # definition of joint transforms
  - torso_lift:
      frame: [{axis-angle: [unit_x, 0]}, {vector3: [-0.05, 0, {double-addition: [0.739675, torso_lift_joint]}]}]
  - l_shoulder_pan:
      frame: [{axis-angle: [unit_z, l_shoulder_pan_joint]}, {vector3: [0.0, 0.188, 0.0]}]
  - l_shoulder_lift:
      frame: [{axis-angle: [unit_y, l_shoulder_lift_joint]}, {vector3: [0.1, 0, 0]}]
  - l_upper_arm_roll:
      frame: [{axis-angle: [unit_x, l_upper_arm_roll_joint]}, {vector3: [0, 0, 0]}]
  - l_elbow_flex:
      frame: [{axis-angle: [unit_y, l_elbow_flex_joint]}, {vector3: [0.4, 0, 0]}]
  - l_forearm_roll:
      frame: [{axis-angle: [unit_x, l_forearm_roll_joint]}, {vector3: [0, 0, 0]}]
  - l_wrist_flex:
      frame: [{axis-angle: [unit_y, l_wrist_flex_joint]}, {vector3: [0.321, 0, 0]}]
  - l_wrist_roll:
      frame: [{axis-angle: [unit_x, l_wrist_roll_joint]}, {vector3: [0, 0, 0]}]
  
  
  # defintion of entire FK, goal, and control law
  - pr2_fk:
      frame-multiplication:
      - torso_lift 
      - l_shoulder_pan 
      - l_shoulder_lift 
      - l_upper_arm_roll 
      - l_elbow_flex 
      - l_forearm_roll 
      - l_wrist_flex 
      - l_wrist_roll 
  - pr2_fk_pos: {origin-of: pr2_fk}
  - pr2_fk_goal: {vector3: [0.6, 0.5, 0.7]}
  - pr2_fk_error_vector: {vector-subtraction: [pr2_fk_goal, pr2_fk_pos]}
  - pr2_fk_error: {vector-norm: pr2_fk_error_vector}
  - pr2_fk_control_law: {double-multiplication: [-10.0, pr2_fk_error]}


controllable-constraints:
  - lower: -0.1
    upper: 0.1
    weight: 10.0
    input-number: 0
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 1
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 2
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 3
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 4
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 5
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 6
  - lower: -0.3
    upper: 0.3
    weight: 1.0
    input-number: 7


soft-constraints:
  - expression: pr2_fk_error
    lower: pr2_fk_control_law
    upper: pr2_fk_control_law
    weight: 10.0


hard-constraints:
  - expression: torso_lift_joint
    lower: {double-subtraction: [0.0115, torso_lift_joint]}
    upper: {double-subtraction: [0.325, torso_lift_joint]}
  - expression: l_shoulder_pan_joint
    lower: {double-subtraction: [-0.5646, l_shoulder_pan_joint]}
    upper: {double-subtraction: [2.1353, l_shoulder_pan_joint]}
  - expression: l_shoulder_lift_joint
    lower: {double-subtraction: [-0.3536, l_shoulder_lift_joint]}
    upper: {double-subtraction: [1.2963, l_shoulder_lift_joint]}
  - expression: l_upper_arm_roll_joint
    lower: {double-subtraction: [-0.65, l_upper_arm_roll_joint]}
    upper: {double-subtraction: [3.75, l_upper_arm_roll_joint]}
  - expression: l_elbow_flex_joint
    lower: {double-subtraction: [-2.1213, l_elbow_flex_joint]}
    upper: {double-subtraction: [-0.15, l_elbow_flex_joint]}
  - expression: l_wrist_flex_joint
    lower: {double-subtraction: [-2.0, l_wrist_flex_joint]}
    upper: {double-subtraction: [-0.1, l_wrist_flex_joint]}

